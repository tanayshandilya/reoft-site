<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="icon" href="/static/img/basic/favicon.ico" type="image/x-icon">
    <title><%= title %></title>
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/app.css">
    <style>.loader{position:fixed;left:0;top:0;width:100%;height:100%;background-color:#F5F8FA;z-index:9998;text-align:center}.plane-container{position:absolute;top:50%;left:50%}a:focus,button:focus,input:focus{outline:0!important}a,button{cursor:pointer}</style>
    <script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
    <script src="/static/js/cookies.src.js"></script>
    <script type="text/javascript" src="/static/js/jsencrypt.min.js"></script>
    <script type="text/javascript">
        const spinnerIcon = $(`<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
        <path opacity="0.2" fill="#fff" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
            s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
            c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"></path>
        <path fill="#fff" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
            C22.32,8.481,24.301,9.057,26.013,10.047z" transform="rotate(171.149 20 20)">
            <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="1s" repeatCount="indefinite"></animateTransform>
            </path>
        </svg>`);
        var rsa = new JSEncrypt();
        var publicKey = `-----BEGIN PUBLIC KEY-----
        MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAIBXxvsZe+imHmrP4mkfuSQb5c41rhk+
        FJwAlAAMsmO4xzOKbJmkl6GL75jv4usB3DT/AMN4W63+bItMeQVh0zkCAwEAAQ==
        -----END PUBLIC KEY-----`;
        rsa.setPublicKey(publicKey);
    </script>
</head>
<body>
<!-- Pre loader -->
<div id="loader" class="loader">
    <div class="plane-container">
        <div class="l-s-2 blink">LOADING</div>
    </div>
</div>
<% if(!user){ %>
<div class="header-top hide-for-small-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-7">
                <ul class="top-nav top-nav-hide-on-small">
                    <li><a href="/support/buyer-protection">Buyer Protection</a></li>
                    <li><a href="/support/help">Help</a></li>
                    <li><a href="/download-mobile-app">Download Mobile App</a></li>
                </ul>
            </div>
            <div class="col-xs-12 col-md-5">
                <ul class="top-nav top-nav-text-right">
                    <li><a href="/cart"><span class="badge badge-success" id="cart-value" style="padding: 4.5px;width: 20px;height: 20px;border-radius: 50%;"></span><i class="icon icon-shopping-cart"></i>Cart</a></li>
                    <li><a href="#modalLogin" data-toggle="modal" data-target="#modalLogin"><i class="icon icon-user"></i>Login</a></li>
                    <li><a href="#modalSignUp" data-toggle="modal" data-target="#modalSignUp"><i class="icon icon-lock"></i>Register</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<% } %>
<nav class="mainnav navbar navbar-default sticky justify-content-between bg-white" style="box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08), 0 2px 6px rgba(0, 0, 0, 0.09); z-index: 99">
       <div class="container relative">
           <a class="offcanvas dl-trigger paper-nav-toggle" data-toggle="offcanvas" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
               <i></i>
           </a>
           <a class="navbar-brand" href="/">
               <img class="d-inline-block align-top" alt="" src="/static/img/basic/logo.png">
           </a>
           <div class="paper_menu">
               <div id="dl-menu" class="xv-menuwrapper responsive-menu">
    <ul class="dl-menu align-items-center">
        <li><a href="/">Home</a></li>
        <li class="parent"><a href="javascript:void(0)">About</a>
            <ul class="lg-submenu">
                <li><a href="/about">About Us</a></li>
                <li><a href="/about/team">Our Team</a></li>
                <li><a href="/about/testimonials">Testimonials</a></li>
                <li><a href="/careers">Careers</a></li>
            </ul>
        </li>
        <li><a href="/services">Services</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="/open-projects">Open Projects</a></li>
        <li><a href="/shop">Shop</a></li>
        <li><a href="/contact">Contact Us</a></li>
        <% if(user){ %>
        <li class="parent megamenu"><a class="ml-0" href="javascript:void(0)"><i class="icon icon-user-circle-o"></i></a>
            <ul class="lg-submenu">
                <style>
                    li.user-options::before{
                        border: none !important;
                    }
                    a.user-options-name {
                        border-bottom: 1px dashed rgba(0,0,0,0.05) !important;
                        padding-bottom: 5px !important;
                        margin-bottom: 2px !important;
                    }
                    @media (max-width: 1000px) {
                        .logout-btn-container{
                            padding: 12px !important;
                        }
                    } .logout-btn-container { padding: 0; }
                </style>
                <li class="user-options">
                  <a class="user-options-name">
                    <i class="icon icon-user-circle-o s-24 pr-0"></i>
                    <span class="badge badge-secondary s-12" style="vertical-align: super;">@<%= user.username %></span>
                  </a>
                    <ul class="lg-submenu">
                        <li>
                            <a href="/dashboard">Dashboard</a>
                        </li>
                        <li>
                            <a href="/dashboard/settings">Settings</a>
                        </li>
                        <li>
                            <a href="/dashboard/orders">My Orders</a>
                        </li>
                        <li class="mb-1">
                            <a href="/dashboard/account">My Account</a>
                        </li>
                        <li class="logout-btn-container">
                            <span onclick="logout('<%= user.tokenId %>')" style="cursor: pointer; width: 100%" class="badge badge-danger s-14">Logout</span>
                        </li>
                    </ul>
                    <script>
                        const logout = (tId) => {
                            if(typeof eraseCookieFromAllPaths(`--reoft-${tId}`) == 'undefined'){
                            window.location.reload();
                            }
                        }
                    </script>
                </li>
            </ul>
        </li>
        <li>
            <a href="/cart" class="ml-0"><span class="badge badge-success" id="cart-value" style="padding: 4.5px;width: 20px;height: 20px;border-radius: 50%;"></span><i class="icon icon-shopping-cart"></i></a>
        </li>
        <% } %>
    </ul>
</div>
       </div>
   </div>
</nav>
<% if(!user){ %>
<!-- Login Modal -->
<div class="modal fade" id="modalLogin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog width-400" role="document">
        <div class="modal-content no-r "><a href="#" data-dismiss="modal" aria-label="Close" class="paper-nav-toggle active"><i></i></a>
            <div class="modal-body no-p">
                <div class="text-center p-40 p-b-0">
                    <img src="/static/img/dummy/u4.png" alt="">
                    <h3>Welcome Back</h3>
                    <p class="p-t-b-20">Hey Soldier welcome back signin now there is lot of new stuff waiting
                        for you</p>
                </div>
                <div class="light p-40 b-t-b">
                    <div role="alert" class="alert alert-danger login-error" style="display:none;"></div>
                    <form id="loginForm">
                        <div class="form-group has-icon"><i class="icon-envelope-o"></i>
                            <input type="text" name="login-email" class="form-control form-control-lg" placeholder="Email Address">
                        </div>
                        <div class="form-group has-icon"><i class="icon-user-secret"></i>
                            <input type="password" name="login-password" class="form-control form-control-lg" placeholder="Password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg btn-login btn-block">Log In</button>
                        <small class="forget-pass">Have you forgot your username or password ?</small>
                    </form>
                </div>
                <script type="text/javascript">
                const validateLoginEmail = () => {
                    if($(`input[name="login-email"]`).val() !== ''){
                      if(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($(`input[name="login-email"]`).val())) {
                        $(`input[name="login-email"]`).removeClass('is-invalid');
                        return true;  
                      }else{
                        $(`input[name="login-email"]`).addClass('is-invalid');
                        return false;
                      }
                    }else {
                      $(`input[name="login-email"]`).addClass('is-invalid');
                      return false;
                    }
                  }
                  const validateLoginPassword = () => {
                    if($(`input[name="login-password"]`).val() !== ''){
                      $(`input[name="login-password"]`).removeClass('is-invalid');
                      return true;  
                    }else {
                      $(`input[name="login-password"]`).addClass('is-invalid');
                      return false;
                    }
                  }
                $('#loginForm').on('submit', (e)=>{
                  e.preventDefault(), e.stopPropagation();
                  if(validateLoginEmail() && validateLoginPassword()){
                    $(`input[name="login-email"]`).attr('disabled','');
                    $(`input[name="login-password"]`).attr('disabled','');
                    $(`.btn-login`).attr('disabled','').addClass('disabled').html(spinnerIcon.attr('style','margin: -4px 0 -8px 0px'));
                    $.post('/api/auth/login',
                     {email: rsa.encrypt($(`input[name="login-email"]`).val()), password: rsa.encrypt($(`input[name="login-password"]`).val())},
                     (resp)=>{
                       if(resp.status === 'success') {
                        Cookies.set(resp.data.token.name, resp.data.token.value, {path: '/', expires: '2h'});
                        setTimeout(()=>{window.location.reload()},2000);
                       }else{
                        $(`input[name="login-email"]`).removeAttr('disabled');
                        $(`input[name="login-password"]`).removeAttr('disabled');
                        $(`.btn-login`).removeAttr('disabled').removeClass('disabled').html('Log In');
                         $('.login-error').html(resp.message).fadeIn().delay(1200).fadeOut();  
                       }
                    });
                  }
                });
                </script>
                <!-- <div class="p-40"><a href="#" class="btn btn-lg btn-block btn-social facebook">
                    <i class="icon-facebook"></i> Login with Facebook
                </a>
                    <a href="#" class="btn btn-lg btn-block btn-social " style="background-color:#db3236">

                        <i class="icon-google"></i> Login with Google

                    </a>
                </div> -->
            </div>
        </div>
    </div>
</div>
<!-- Sign Up Modal -->
<div class="modal fade" id="modalSignUp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content no-r "><a href="#" data-dismiss="modal" aria-label="Close" class="paper-nav-toggle active"><i></i></a>
            <div class="modal-body no-p">
                <div class="row">
                    <div class="col-lg-5 grid">
                        <div class="p-40">
                            <h5 class="p-t-40">Sign Up Using Social Account</h5>
                            <p class="p-t-b-20">Hey Soldier welcome back signin now there is lot of new stuff waiting
                                for you</p> <a href="#" class="btn btn-lg btn-block btn-social facebook">
                            <i class="icon-facebook"></i> Login with Facebook
                        </a>
                            <a href="#" class="btn btn-lg btn-block btn-social twitter">

                                <i class="icon-twitter"></i> Login with Twitter

                            </a>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="light p-t-b-40">
                            <div class="p-40">
                                <h5 class="p-b-20">Create New User Account</h5>
                                <form action="dashboard2.html ">
                                    <div class="form-group has-icon"><i class="icon-user-circle"></i>
                                        <input type="text" class="form-control form-control-lg" placeholder="Your Name">
                                    </div>
                                    <div class="form-group has-icon"><i class="icon-envelope-o"></i>
                                        <input type="text" class="form-control form-control-lg" placeholder="Email Address">
                                    </div>
                                    <div class="form-group has-icon"><i class="icon-user-secret"></i>
                                        <input type="text" class="form-control form-control-lg" placeholder="Password">
                                    </div>
                                    <div class="form-group has-icon"><i class="icon-repeat"></i>
                                        <input type="text" class="form-control form-control-lg" placeholder="Confirm Password">
                                    </div>
                                    <input type="submit" class="btn btn-primary btn-lg btn-block" value="Sign Up Now">
                                    <p class="forget-pass">A verification email wil be sent to you</p>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<% } %>
<div class="notifications"></div>
<script>
const sweetAlert = {
    success: (message) => {
        $(`<div class="alert notify-success" style="display: none;">${message}</div>`).appendTo('.notifications').delay(100).fadeIn().delay(1200).fadeOut();
    },
    error: (message) => {
        $(`<div class="alert notify-danger" style="display: none;">${message}</div>`).appendTo('.notifications').delay(100).fadeIn().delay(1200).fadeOut();
    },
    warning: (message) => {
        $(`<div class="alert notify-warning" style="display: none;">${message}</div>`).appendTo('.notifications').delay(100).fadeIn().delay(1200).fadeOut();
    },
    primary: (message) => {
        $(`<div class="alert notify-primary" style="display: none;">${message}</div>`).appendTo('.notifications').delay(100).fadeIn().delay(1200).fadeOut();
    },
    clearAll: () => {
        $('.notifications').empty();
    }
};
</script>